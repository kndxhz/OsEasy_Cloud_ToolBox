    - name:  Generate changelog
      id: changelog
      shell: pwsh
      run: |
        $prevTag = "${{ steps.get-prev-tag.outputs.PREV_TAG }}"
        $version = "v${{ steps.read-version.outputs.VERSION }}"
        
        # ç”Ÿæˆ Full Changelog é“¾æ¥
        if ($prevTag) {
          $fullChangelog = "Full Changelog: $prevTag...$version"
        } else {
          $fullChangelog = "Full Changelog: Initial Release $version"
        }
        
        # è·å–æäº¤ä¿¡æ¯
        $commits = if ($prevTag) {
          git log "$prevTag..HEAD" --pretty=format:"%s (%h)" --no-merges
        } else {
          git log --pretty=format:"%s (%h)" --no-merges
        }
        
        # åˆ†ç±»æäº¤
        $featCommits = @()
        $fixCommits = @()
        $otherCommits = @()
        
        foreach ($commit in $commits) {
          if ($commit -match "^feat(\(.+?\))?:\s*(.+)") {
            $featCommits += $commit
          } elseif ($commit -match "^fix(\(.+?\))?:\s*(.+)") {
            $fixCommits += $commit
          } else {
            $otherCommits += $commit
          }
        }
        
        # æ„å»º changelog æ–‡æœ¬
        $changelog = @()
        $changelog += "# Changelog $version"
        $changelog += $fullChangelog
        if ($featCommits.Count -gt 0) {
          $changelog += "`n## âœ¨ Features"
          $changelog += $featCommits
        }
        if ($fixCommits.Count -gt 0) {
          $changelog += "`n## ğŸ› Fixes"
          $changelog += $fixCommits
        }
        if ($otherCommits.Count -gt 0) {
          $changelog += "`n## ğŸ“¦ Others"
          $changelog += $otherCommits
        }
        
        $changelogText = $changelog -join "`n"
        @"
CHANGELOG<<'EOF'
$changelogText
EOF
"@ | Out-File -FilePath $env:GITHUB_OUTPUT -Encoding utf8 -Append
        echo "Generated changelog:"
        echo $changelogText
